<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="sid-38422fae-e03e-43a3-bef4-bd33b32041b2" targetNamespace="http://bpmn.io/bpmn" exporter="bpmn-js (https://demo.bpmn.io)" exporterVersion="18.6.1">
  <collaboration id="Collaboration_0sll7qh">
    <participant id="Participant_06u3ngd" name="USUARIO" processRef="Process_1" />
    <participant id="Participant_0dnzw1n" name="SISTEMA" processRef="Process_1fzetlf" />
    <participant id="Participant_0njjcpa" name="usuario" processRef="Process_1d4gvoc" />
    <participant id="Participant_1v79x9m" name="sistema" processRef="Process_1pqajho" />
    <messageFlow id="Flow_0mkzm3x" sourceRef="Activity_129lnal" targetRef="Activity_03mpnm5" />
    <messageFlow id="Flow_1sm0hht" sourceRef="Activity_1eg2ykf" targetRef="Activity_0yujhel" />
    <messageFlow id="Flow_07f9j0d" sourceRef="Event_03g9jsa" targetRef="Activity_1t1p2th" />
  </collaboration>
  <process id="Process_1" isExecutable="false">
    <startEvent id="Event_0fqvwnu">
      <outgoing>Flow_1nei393</outgoing>
    </startEvent>
    <task id="Activity_129lnal" name="Solicitação e recebimento">
      <incoming>Flow_1nei393</incoming>
    </task>
    <sequenceFlow id="Flow_1nei393" sourceRef="Event_0fqvwnu" targetRef="Activity_129lnal" />
  </process>
  <process id="Process_1fzetlf" isExecutable="false">
    <task id="Activity_03mpnm5" name="Gerar QRCODE">
      <outgoing>Flow_1hx1jfd</outgoing>
    </task>
    <task id="Activity_0gwkefs" name="Aguardado confirmação de pagamento webbook">
      <incoming>Flow_072dsec</incoming>
      <dataOutputAssociation id="DataOutputAssociation_037faf4">
        <targetRef>DataStoreReference_1eavwk4</targetRef>
      </dataOutputAssociation>
    </task>
    <dataStoreReference id="DataStoreReference_1eavwk4" name="Atualizar saldo no bancos de dados" />
    <subProcess id="Activity_0nv45zh" name="Chamar api do asaas para gerar QR CODE">
      <incoming>Flow_1hx1jfd</incoming>
      <outgoing>Flow_072dsec</outgoing>
    </subProcess>
    <sequenceFlow id="Flow_1hx1jfd" sourceRef="Activity_03mpnm5" targetRef="Activity_0nv45zh" />
    <sequenceFlow id="Flow_072dsec" sourceRef="Activity_0nv45zh" targetRef="Activity_0gwkefs" />
  </process>
  <process id="Process_1d4gvoc">
    <task id="Activity_1eg2ykf" name="Solicitação de Transferencia">
      <incoming>Flow_0pwtlms</incoming>
    </task>
    <startEvent id="Event_1maks6f">
      <outgoing>Flow_0pwtlms</outgoing>
    </startEvent>
    <endEvent id="Event_03g9jsa" />
    <sequenceFlow id="Flow_0pwtlms" sourceRef="Event_1maks6f" targetRef="Activity_1eg2ykf" />
  </process>
  <process id="Process_1pqajho">
    <task id="Activity_0yujhel" name="Consular saldo no banco de dados">
      <outgoing>Flow_0g6omt8</outgoing>
    </task>
    <exclusiveGateway id="Gateway_1tieug8" name="Saldo e suficiente">
      <incoming>Flow_0g6omt8</incoming>
      <outgoing>Flow_0w8b8vp</outgoing>
      <outgoing>Flow_1m9kfty</outgoing>
    </exclusiveGateway>
    <task id="Activity_0ynn40w" name="Calculkar retenção 7%">
      <incoming>Flow_1m9kfty</incoming>
      <outgoing>Flow_1672y7x</outgoing>
    </task>
    <exclusiveGateway id="Gateway_1tf5o7n" name="valor &#62; R$ 5.000">
      <incoming>Flow_1672y7x</incoming>
      <outgoing>Flow_1joobhv</outgoing>
      <outgoing>Flow_17kjrsq</outgoing>
    </exclusiveGateway>
    <task id="Activity_1t1p2th" name="Registrar transação de saida no BD">
      <incoming>Flow_1gl6uer</incoming>
    </task>
    <subProcess id="Activity_05g302a" name="Notificar usuario sobre o saldo insuficiente - transferencia cancelada">
      <incoming>Flow_0w8b8vp</incoming>
    </subProcess>
    <subProcess id="Activity_1un71si" name="Solicitar aprovação manual - aguarda aprovação - chamar api para executar transferencia">
      <incoming>Flow_1joobhv</incoming>
      <outgoing>Flow_1gl6uer</outgoing>
    </subProcess>
    <subProcess id="Activity_1faki8h" name="Chamar API  para executar transferencia">
      <incoming>Flow_17kjrsq</incoming>
    </subProcess>
    <sequenceFlow id="Flow_0g6omt8" sourceRef="Activity_0yujhel" targetRef="Gateway_1tieug8" />
    <sequenceFlow id="Flow_0w8b8vp" name="não" sourceRef="Gateway_1tieug8" targetRef="Activity_05g302a" />
    <sequenceFlow id="Flow_1m9kfty" name="sim" sourceRef="Gateway_1tieug8" targetRef="Activity_0ynn40w" />
    <sequenceFlow id="Flow_1672y7x" sourceRef="Activity_0ynn40w" targetRef="Gateway_1tf5o7n" />
    <sequenceFlow id="Flow_1joobhv" name="sim" sourceRef="Gateway_1tf5o7n" targetRef="Activity_1un71si" />
    <sequenceFlow id="Flow_17kjrsq" name="não" sourceRef="Gateway_1tf5o7n" targetRef="Activity_1faki8h" />
    <sequenceFlow id="Flow_1gl6uer" sourceRef="Activity_1un71si" targetRef="Activity_1t1p2th" />
  </process>
  <bpmndi:BPMNDiagram id="BpmnDiagram_1">
    <bpmndi:BPMNPlane id="BpmnPlane_1" bpmnElement="Collaboration_0sll7qh">
      <bpmndi:BPMNShape id="Participant_06u3ngd_di" bpmnElement="Participant_06u3ngd" isHorizontal="true">
        <omgdc:Bounds x="390" y="40" width="640" height="290" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0fqvwnu_di" bpmnElement="Event_0fqvwnu">
        <omgdc:Bounds x="452" y="72" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_129lnal_di" bpmnElement="Activity_129lnal">
        <omgdc:Bounds x="570" y="110" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1nei393_di" bpmnElement="Flow_1nei393">
        <omgdi:waypoint x="488" y="90" />
        <omgdi:waypoint x="529" y="90" />
        <omgdi:waypoint x="529" y="150" />
        <omgdi:waypoint x="570" y="150" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="BPMNShape_132cdjz" bpmnElement="Participant_0dnzw1n" isHorizontal="true">
        <omgdc:Bounds x="390" y="330" width="640" height="360" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_03mpnm5_di" bpmnElement="Activity_03mpnm5">
        <omgdc:Bounds x="460" y="370" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0gwkefs_di" bpmnElement="Activity_0gwkefs">
        <omgdc:Bounds x="690" y="500" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_1eavwk4_di" bpmnElement="DataStoreReference_1eavwk4">
        <omgdc:Bounds x="925" y="525" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="914" y="582" width="73" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0nv45zh_di" bpmnElement="Activity_0nv45zh" isExpanded="true">
        <omgdc:Bounds x="490" y="480" width="140" height="120" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1hx1jfd_di" bpmnElement="Flow_1hx1jfd">
        <omgdi:waypoint x="510" y="450" />
        <omgdi:waypoint x="510" y="480" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_072dsec_di" bpmnElement="Flow_072dsec">
        <omgdi:waypoint x="630" y="540" />
        <omgdi:waypoint x="690" y="540" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_0njjcpa_di" bpmnElement="Participant_0njjcpa" isHorizontal="true">
        <omgdc:Bounds x="160" y="790" width="1420" height="250" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1eg2ykf_di" bpmnElement="Activity_1eg2ykf">
        <omgdc:Bounds x="280" y="850" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1maks6f_di" bpmnElement="Event_1maks6f">
        <omgdc:Bounds x="202" y="802" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_03g9jsa_di" bpmnElement="Event_03g9jsa">
        <omgdc:Bounds x="1442" y="902" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0pwtlms_di" bpmnElement="Flow_0pwtlms">
        <omgdi:waypoint x="238" y="820" />
        <omgdi:waypoint x="260" y="820" />
        <omgdi:waypoint x="260" y="890" />
        <omgdi:waypoint x="280" y="890" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_1v79x9m_di" bpmnElement="Participant_1v79x9m" isHorizontal="true">
        <omgdc:Bounds x="160" y="1040" width="1420" height="480" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0yujhel_di" bpmnElement="Activity_0yujhel">
        <omgdc:Bounds x="600" y="1060" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1tieug8_di" bpmnElement="Gateway_1tieug8" isMarkerVisible="true">
        <omgdc:Bounds x="625" y="1175" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="607" y="1232" width="87" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0ynn40w_di" bpmnElement="Activity_0ynn40w">
        <omgdc:Bounds x="760" y="1160" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1tf5o7n_di" bpmnElement="Gateway_1tf5o7n" isMarkerVisible="true">
        <omgdc:Bounds x="975" y="1175" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="959" y="1151" width="81" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1t1p2th_di" bpmnElement="Activity_1t1p2th">
        <omgdc:Bounds x="1410" y="1160" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_05g302a_di" bpmnElement="Activity_05g302a" isExpanded="true">
        <omgdc:Bounds x="330" y="1140" width="160" height="120" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1un71si_di" bpmnElement="Activity_1un71si" isExpanded="true">
        <omgdc:Bounds x="1150" y="1140" width="160" height="120" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1faki8h_di" bpmnElement="Activity_1faki8h" isExpanded="true">
        <omgdc:Bounds x="925" y="1320" width="145" height="120" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0g6omt8_di" bpmnElement="Flow_0g6omt8">
        <omgdi:waypoint x="650" y="1140" />
        <omgdi:waypoint x="650" y="1175" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0w8b8vp_di" bpmnElement="Flow_0w8b8vp">
        <omgdi:waypoint x="625" y="1200" />
        <omgdi:waypoint x="490" y="1200" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="548" y="1182" width="19" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1m9kfty_di" bpmnElement="Flow_1m9kfty">
        <omgdi:waypoint x="675" y="1200" />
        <omgdi:waypoint x="760" y="1200" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="709" y="1182" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1672y7x_di" bpmnElement="Flow_1672y7x">
        <omgdi:waypoint x="860" y="1200" />
        <omgdi:waypoint x="975" y="1200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1joobhv_di" bpmnElement="Flow_1joobhv">
        <omgdi:waypoint x="1025" y="1200" />
        <omgdi:waypoint x="1150" y="1200" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="1079" y="1182" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_17kjrsq_di" bpmnElement="Flow_17kjrsq">
        <omgdi:waypoint x="1000" y="1225" />
        <omgdi:waypoint x="1000" y="1320" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="1006" y="1270" width="19" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1gl6uer_di" bpmnElement="Flow_1gl6uer">
        <omgdi:waypoint x="1310" y="1200" />
        <omgdi:waypoint x="1410" y="1200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0mkzm3x_di" bpmnElement="Flow_0mkzm3x">
        <omgdi:waypoint x="620" y="190" />
        <omgdi:waypoint x="620" y="280" />
        <omgdi:waypoint x="510" y="280" />
        <omgdi:waypoint x="510" y="370" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_037faf4_di" bpmnElement="DataOutputAssociation_037faf4">
        <omgdi:waypoint x="790" y="540" />
        <omgdi:waypoint x="925" y="540" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1sm0hht_di" bpmnElement="Flow_1sm0hht">
        <omgdi:waypoint x="330" y="930" />
        <omgdi:waypoint x="330" y="995" />
        <omgdi:waypoint x="650" y="995" />
        <omgdi:waypoint x="650" y="1060" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_07f9j0d_di" bpmnElement="Flow_07f9j0d">
        <omgdi:waypoint x="1460" y="938" />
        <omgdi:waypoint x="1460" y="1160" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>
